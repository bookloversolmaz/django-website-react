{"ast":null,"code":"import _objectSpread from\"/home/spurser/django-website-react/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";// import React, { useState, useEffect } from 'react';\n// import AxiosInstance from '../../axiosinstance'; \n// import { useNavigate } from 'react-router-dom'; // Correctly import useNavigate\n// import './writing.css'\n// // This is the writing landing page, which contains all of the blogs with the first 100 words of the body text.\n// // The user can then click on the title of each blog and they are then taken to the post detail page\n// const WritingLandingPage = () => {\n//   const [posts, setPosts] = useState([]);\n//   const navigate = useNavigate();\n//   const getPostData = async () => {\n//     try {\n//       const response = await AxiosInstance.get('/writing/');\n//       if (response.status === 200) {\n//         setPosts(response.data);\n//       } else {\n//         console.error('Error fetching data: Response is undefined or status is not 200');\n//       }\n//     } catch (error) {\n//       console.error('Error fetching data:', error.message);\n//     }\n//   };\n//   useEffect(() => {\n//     getPostData();\n//   }, []);\n//   // Sort posts by 'created_on' date, with newest at the top\n//   // The sortedPosts variable uses the Array.sort() method to sort the posts array by the created_on date in ascending order (oldest first).\n//   // new Date(a.created_on): Converts the created_on string into a JavaScript Date object for comparison.\n//   // Ascending Order: Subtracts a.created_on from b.created_on. To reverse the order, you could subtract b.created_on from a.created_on.\n//   const sortedPosts = [...posts].sort((a, b) => new Date(b.created_on) - new Date(a.created_on));\n//   // Function to handle post click\n//   const handlePostClick = (postId) => {\n//     navigate(`/writing/${postId}`); // Redirect to the detailed view of the post\n//   };\n//   return (\n//     <div>\n//       <h1 className='landing-page-heading'>Writing</h1>\n//       {sortedPosts.length === 0 ? (\n//         <div>Loading...</div>\n//       ) : (\n//         <div>\n//           {sortedPosts.map((post) => (\n//             <div className=\"writing-block\" key={post.id}>\n//               <h2 className='writing-title' style={{ cursor: 'pointer' }} onClick={() => handlePostClick(post.id)}>\n//                 {post.title}\n//               </h2>\n//               <p>Publication date: {new Date(post.publication_date).toLocaleDateString('en-GB', {\n//               day: '2-digit',\n//               month: 'long',\n//               year: 'numeric',\n//               })}</p>\n//               <p>Created on: {new Date(post.created_on).toLocaleDateString('en-GB', {\n//               day: '2-digit',\n//               month: 'long',\n//               year: 'numeric',\n//               })}</p>\n//               <p>\n//                 {post.body.length > 100 ? `${post.body.substring(0, 100)}...` : post.body}\n//               </p>\n//             </div>\n//           ))}\n//         </div>\n//       )}\n//     </div>\n//   );\n// };\n// export default WritingLandingPage;\nimport React,{useState,useEffect}from'react';import AxiosInstance from'../../axiosinstance';import{useNavigate}from'react-router-dom';// Correctly import useNavigate\nimport'./writing.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const WritingLandingPage=()=>{const[posts,setPosts]=useState([]);const navigate=useNavigate();const getPostData=async()=>{try{const response=await AxiosInstance.get('/writing/');console.log('Fetched response:',response.data);if(response.data&&response.data.posts&&Array.isArray(response.data.posts)){const postsWithValidBody=response.data.posts.map(post=>_objectSpread(_objectSpread({},post),{},{body:post.body||''// Provide a fallback for 'body' if it's undefined\n}));setPosts(postsWithValidBody);}else{console.error('Error: The posts data is not an array or is missing.');}}catch(error){console.error('Error fetching data:',error.message);}};useEffect(()=>{getPostData();},[]);// Sort posts by 'created_on' date, with newest at the top\nconst sortedPosts=[...posts].sort((a,b)=>new Date(b.created_on)-new Date(a.created_on));// Function to handle post click\nconst handlePostClick=postId=>{navigate(\"/writing/\".concat(postId));// Redirect to the detailed view of the post\n};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"landing-page-heading\",children:\"Writing\"}),sortedPosts.length===0?/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"}):/*#__PURE__*/_jsx(\"div\",{children:sortedPosts.map(post=>/*#__PURE__*/_jsxs(\"div\",{className:\"writing-block\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"writing-title\",style:{cursor:'pointer'},onClick:()=>handlePostClick(post.id),children:post.title}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Publication date: \",new Date(post.publication_date).toLocaleDateString('en-GB',{day:'2-digit',month:'long',year:'numeric'})]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Created on: \",new Date(post.created_on).toLocaleDateString('en-GB',{day:'2-digit',month:'long',year:'numeric'})]}),/*#__PURE__*/_jsx(\"p\",{children:post.body&&post.body.length>100?\"\".concat(post.body.substring(0,100),\"...\"):post.body||'No content available'})]},post.id))})]});};export default WritingLandingPage;","map":{"version":3,"names":["React","useState","useEffect","AxiosInstance","useNavigate","jsx","_jsx","jsxs","_jsxs","WritingLandingPage","posts","setPosts","navigate","getPostData","response","get","console","log","data","Array","isArray","postsWithValidBody","map","post","_objectSpread","body","error","message","sortedPosts","sort","a","b","Date","created_on","handlePostClick","postId","concat","children","className","length","style","cursor","onClick","id","title","publication_date","toLocaleDateString","day","month","year","substring"],"sources":["/home/spurser/django-website-react/frontend/src/components/writing/writinglandingpage.js"],"sourcesContent":["// import React, { useState, useEffect } from 'react';\n// import AxiosInstance from '../../axiosinstance'; \n// import { useNavigate } from 'react-router-dom'; // Correctly import useNavigate\n// import './writing.css'\n\n// // This is the writing landing page, which contains all of the blogs with the first 100 words of the body text.\n// // The user can then click on the title of each blog and they are then taken to the post detail page\n// const WritingLandingPage = () => {\n//   const [posts, setPosts] = useState([]);\n//   const navigate = useNavigate();\n\n//   const getPostData = async () => {\n//     try {\n//       const response = await AxiosInstance.get('/writing/');\n//       if (response.status === 200) {\n//         setPosts(response.data);\n//       } else {\n//         console.error('Error fetching data: Response is undefined or status is not 200');\n//       }\n//     } catch (error) {\n//       console.error('Error fetching data:', error.message);\n//     }\n//   };\n\n//   useEffect(() => {\n//     getPostData();\n//   }, []);\n  \n//   // Sort posts by 'created_on' date, with newest at the top\n//   // The sortedPosts variable uses the Array.sort() method to sort the posts array by the created_on date in ascending order (oldest first).\n//   // new Date(a.created_on): Converts the created_on string into a JavaScript Date object for comparison.\n//   // Ascending Order: Subtracts a.created_on from b.created_on. To reverse the order, you could subtract b.created_on from a.created_on.\n//   const sortedPosts = [...posts].sort((a, b) => new Date(b.created_on) - new Date(a.created_on));\n\n//   // Function to handle post click\n//   const handlePostClick = (postId) => {\n//     navigate(`/writing/${postId}`); // Redirect to the detailed view of the post\n//   };\n\n//   return (\n//     <div>\n//       <h1 className='landing-page-heading'>Writing</h1>\n//       {sortedPosts.length === 0 ? (\n//         <div>Loading...</div>\n//       ) : (\n//         <div>\n//           {sortedPosts.map((post) => (\n//             <div className=\"writing-block\" key={post.id}>\n//               <h2 className='writing-title' style={{ cursor: 'pointer' }} onClick={() => handlePostClick(post.id)}>\n//                 {post.title}\n//               </h2>\n//               <p>Publication date: {new Date(post.publication_date).toLocaleDateString('en-GB', {\n//               day: '2-digit',\n//               month: 'long',\n//               year: 'numeric',\n//               })}</p>\n//               <p>Created on: {new Date(post.created_on).toLocaleDateString('en-GB', {\n//               day: '2-digit',\n//               month: 'long',\n//               year: 'numeric',\n//               })}</p>\n//               <p>\n//                 {post.body.length > 100 ? `${post.body.substring(0, 100)}...` : post.body}\n//               </p>\n//             </div>\n//           ))}\n//         </div>\n//       )}\n//     </div>\n//   );\n// };\n\n// export default WritingLandingPage;\n\nimport React, { useState, useEffect } from 'react';\nimport AxiosInstance from '../../axiosinstance'; \nimport { useNavigate } from 'react-router-dom'; // Correctly import useNavigate\nimport './writing.css'\n\nconst WritingLandingPage = () => {\n  const [posts, setPosts] = useState([]);\n  const navigate = useNavigate();\n\n  const getPostData = async () => {\n    try {\n      const response = await AxiosInstance.get('/writing/');\n      console.log('Fetched response:', response.data);\n      if (response.data && response.data.posts && Array.isArray(response.data.posts)) {\n        const postsWithValidBody = response.data.posts.map(post => ({\n          ...post,\n          body: post.body || '', // Provide a fallback for 'body' if it's undefined\n        }));\n        setPosts(postsWithValidBody);\n      } else {\n        console.error('Error: The posts data is not an array or is missing.');\n      }\n    } catch (error) {\n      console.error('Error fetching data:', error.message);\n    }\n  };\n  \n\n  useEffect(() => {\n    getPostData();\n  }, []);\n  \n  // Sort posts by 'created_on' date, with newest at the top\n  const sortedPosts = [...posts].sort((a, b) => new Date(b.created_on) - new Date(a.created_on));\n\n  // Function to handle post click\n  const handlePostClick = (postId) => {\n    navigate(`/writing/${postId}`); // Redirect to the detailed view of the post\n  };\n\n  return (\n    <div>\n      <h1 className='landing-page-heading'>Writing</h1>\n      {sortedPosts.length === 0 ? (\n        <div>Loading...</div>\n      ) : (\n        <div>\n          {sortedPosts.map((post) => (\n            <div className=\"writing-block\" key={post.id}>\n              <h2 className='writing-title' style={{ cursor: 'pointer' }} onClick={() => handlePostClick(post.id)}>\n                {post.title}\n              </h2>\n              <p>Publication date: {new Date(post.publication_date).toLocaleDateString('en-GB', {\n              day: '2-digit',\n              month: 'long',\n              year: 'numeric',\n              })}</p>\n              <p>Created on: {new Date(post.created_on).toLocaleDateString('en-GB', {\n              day: '2-digit',\n              month: 'long',\n              year: 'numeric',\n              })}</p>\n              <p>\n                {post.body && post.body.length > 100 \n                  ? `${post.body.substring(0, 100)}...` \n                  : post.body || 'No content available'}\n              </p>\n            </div>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default WritingLandingPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}