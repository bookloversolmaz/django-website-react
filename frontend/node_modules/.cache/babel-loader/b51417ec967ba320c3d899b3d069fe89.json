{"ast":null,"code":"import React,{useState,useEffect}from'react';import AxiosInstance from'../../axiosinstance';import{useNavigate}from'react-router-dom';// Correctly import useNavigate\nimport'./writing.css';// This is the writing landing page, which contains all of the blogs with the first 100 words of the body text.\n// The user can then click on the title of each blog and they are then taken to the post detail page\nconst WritingLandingPage=()=>{const[posts,setPosts]=useState([]);const navigate=useNavigate();const getPostData=async()=>{try{const response=await AxiosInstance.get('/writing/');if(response.status===200){setPosts(response.data);}else{console.error('Error fetching data: Response is undefined or status is not 200');}}catch(error){console.error('Error fetching data:',error.message);}};useEffect(()=>{getPostData();},[]);// Sort posts by 'created_on' date, with newest at the top\n// The sortedPosts variable uses the Array.sort() method to sort the posts array by the created_on date in ascending order (oldest first).\n// new Date(a.created_on): Converts the created_on string into a JavaScript Date object for comparison.\n// Ascending Order: Subtracts a.created_on from b.created_on. To reverse the order, you could subtract b.created_on from a.created_on.\nconst sortedPosts=[...posts].sort((a,b)=>new Date(b.created_on)-new Date(a.created_on));// Function to handle post click\nconst handlePostClick=postId=>{navigate(\"/writing/\".concat(postId));// Redirect to the detailed view of the post\n};return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h1\",{className:\"landing-page-heading\"},\"Writing\"),sortedPosts.length===0?/*#__PURE__*/React.createElement(\"div\",null,\"Loading...\"):/*#__PURE__*/React.createElement(\"div\",null,sortedPosts.map(post=>/*#__PURE__*/React.createElement(\"div\",{className:\"writing-block\",key:post.id},/*#__PURE__*/React.createElement(\"h2\",{className:\"writing-title\",style:{cursor:'pointer'},onClick:()=>handlePostClick(post.id)},post.title),/*#__PURE__*/React.createElement(\"p\",null,\"Publication date: \",new Date(post.publication_date).toLocaleDateString('en-GB',{day:'2-digit',month:'long',year:'numeric'})),/*#__PURE__*/React.createElement(\"p\",null,\"Created on: \",new Date(post.created_on).toLocaleDateString('en-GB',{day:'2-digit',month:'long',year:'numeric'})),/*#__PURE__*/React.createElement(\"p\",null,post.body.length>100?\"\".concat(post.body.substring(0,100),\"...\"):post.body)))));};export default WritingLandingPage;// import React, { useState, useEffect } from 'react';\n// import AxiosInstance from '../../axiosinstance'; \n// import { useNavigate } from 'react-router-dom'; // Correctly import useNavigate\n// import './writing.css'\n// const WritingLandingPage = () => {\n//   const [posts, setPosts] = useState([]);\n//   const navigate = useNavigate();\n//   const getPostData = async () => {\n//     try {\n//       const response = await AxiosInstance.get('/writing/');\n//       console.log('Fetched response:', response.data);\n//       if (response.data && response.data.posts && Array.isArray(response.data.posts)) {\n//         const postsWithValidBody = response.data.posts.map(post => ({\n//           ...post,\n//           body: post.body || '', // Provide a fallback for 'body' if it's undefined\n//         }));\n//         setPosts(postsWithValidBody);\n//       } else {\n//         console.error('Error: The posts data is not an array or is missing.');\n//       }\n//     } catch (error) {\n//       console.error('Error fetching data:', error.message);\n//     }\n//   };\n//   useEffect(() => {\n//     getPostData();\n//   }, []);\n//   // Sort posts by 'created_on' date, with newest at the top\n//   const sortedPosts = [...posts].sort((a, b) => new Date(b.created_on) - new Date(a.created_on));\n//   // Function to handle post click\n//   const handlePostClick = (postId) => {\n//     navigate(`/writing/${postId}`); // Redirect to the detailed view of the post\n//   };\n//   return (\n//     <div>\n//       <h1 className='landing-page-heading'>Writing</h1>\n//       {sortedPosts.length === 0 ? (\n//         <div>Loading...</div>\n//       ) : (\n//         <div>\n//           {sortedPosts.map((post) => (\n//             <div className=\"writing-block\" key={post.id}>\n//               <h2 className='writing-title' style={{ cursor: 'pointer' }} onClick={() => handlePostClick(post.id)}>\n//                 {post.title}\n//               </h2>\n//               <p>Publication date: {new Date(post.publication_date).toLocaleDateString('en-GB', {\n//               day: '2-digit',\n//               month: 'long',\n//               year: 'numeric',\n//               })}</p>\n//               <p>Created on: {new Date(post.created_on).toLocaleDateString('en-GB', {\n//               day: '2-digit',\n//               month: 'long',\n//               year: 'numeric',\n//               })}</p>\n//               <p>\n//                 {post.body && post.body.length > 100 \n//                   ? `${post.body.substring(0, 100)}...` \n//                   : post.body || 'No content available'}\n//               </p>\n//             </div>\n//           ))}\n//         </div>\n//       )}\n//     </div>\n//   );\n// };\n// export default WritingLandingPage;","map":{"version":3,"names":["React","useState","useEffect","AxiosInstance","useNavigate","WritingLandingPage","posts","setPosts","navigate","getPostData","response","get","status","data","console","error","message","sortedPosts","sort","a","b","Date","created_on","handlePostClick","postId","concat","createElement","className","length","map","post","key","id","style","cursor","onClick","title","publication_date","toLocaleDateString","day","month","year","body","substring"],"sources":["/home/spurser/django-website-react/frontend/src/components/writing/writinglandingpage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport AxiosInstance from '../../axiosinstance'; \nimport { useNavigate } from 'react-router-dom'; // Correctly import useNavigate\nimport './writing.css'\n\n// This is the writing landing page, which contains all of the blogs with the first 100 words of the body text.\n// The user can then click on the title of each blog and they are then taken to the post detail page\nconst WritingLandingPage = () => {\n  const [posts, setPosts] = useState([]);\n  const navigate = useNavigate();\n\n  const getPostData = async () => {\n    try {\n      const response = await AxiosInstance.get('/writing/');\n      if (response.status === 200) {\n        setPosts(response.data);\n      } else {\n        console.error('Error fetching data: Response is undefined or status is not 200');\n      }\n    } catch (error) {\n      console.error('Error fetching data:', error.message);\n    }\n  };\n\n  useEffect(() => {\n    getPostData();\n  }, []);\n  \n  // Sort posts by 'created_on' date, with newest at the top\n  // The sortedPosts variable uses the Array.sort() method to sort the posts array by the created_on date in ascending order (oldest first).\n  // new Date(a.created_on): Converts the created_on string into a JavaScript Date object for comparison.\n  // Ascending Order: Subtracts a.created_on from b.created_on. To reverse the order, you could subtract b.created_on from a.created_on.\n  const sortedPosts = [...posts].sort((a, b) => new Date(b.created_on) - new Date(a.created_on));\n\n  // Function to handle post click\n  const handlePostClick = (postId) => {\n    navigate(`/writing/${postId}`); // Redirect to the detailed view of the post\n  };\n\n  return (\n    <div>\n      <h1 className='landing-page-heading'>Writing</h1>\n      {sortedPosts.length === 0 ? (\n        <div>Loading...</div>\n      ) : (\n        <div>\n          {sortedPosts.map((post) => (\n            <div className=\"writing-block\" key={post.id}>\n              <h2 className='writing-title' style={{ cursor: 'pointer' }} onClick={() => handlePostClick(post.id)}>\n                {post.title}\n              </h2>\n              <p>Publication date: {new Date(post.publication_date).toLocaleDateString('en-GB', {\n              day: '2-digit',\n              month: 'long',\n              year: 'numeric',\n              })}</p>\n              <p>Created on: {new Date(post.created_on).toLocaleDateString('en-GB', {\n              day: '2-digit',\n              month: 'long',\n              year: 'numeric',\n              })}</p>\n              <p>\n                {post.body.length > 100 ? `${post.body.substring(0, 100)}...` : post.body}\n              </p>\n            </div>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default WritingLandingPage;\n\n// import React, { useState, useEffect } from 'react';\n// import AxiosInstance from '../../axiosinstance'; \n// import { useNavigate } from 'react-router-dom'; // Correctly import useNavigate\n// import './writing.css'\n\n// const WritingLandingPage = () => {\n//   const [posts, setPosts] = useState([]);\n//   const navigate = useNavigate();\n\n//   const getPostData = async () => {\n//     try {\n//       const response = await AxiosInstance.get('/writing/');\n//       console.log('Fetched response:', response.data);\n//       if (response.data && response.data.posts && Array.isArray(response.data.posts)) {\n//         const postsWithValidBody = response.data.posts.map(post => ({\n//           ...post,\n//           body: post.body || '', // Provide a fallback for 'body' if it's undefined\n//         }));\n//         setPosts(postsWithValidBody);\n//       } else {\n//         console.error('Error: The posts data is not an array or is missing.');\n//       }\n//     } catch (error) {\n//       console.error('Error fetching data:', error.message);\n//     }\n//   };\n  \n\n//   useEffect(() => {\n//     getPostData();\n//   }, []);\n  \n//   // Sort posts by 'created_on' date, with newest at the top\n//   const sortedPosts = [...posts].sort((a, b) => new Date(b.created_on) - new Date(a.created_on));\n\n//   // Function to handle post click\n//   const handlePostClick = (postId) => {\n//     navigate(`/writing/${postId}`); // Redirect to the detailed view of the post\n//   };\n\n//   return (\n//     <div>\n//       <h1 className='landing-page-heading'>Writing</h1>\n//       {sortedPosts.length === 0 ? (\n//         <div>Loading...</div>\n//       ) : (\n//         <div>\n//           {sortedPosts.map((post) => (\n//             <div className=\"writing-block\" key={post.id}>\n//               <h2 className='writing-title' style={{ cursor: 'pointer' }} onClick={() => handlePostClick(post.id)}>\n//                 {post.title}\n//               </h2>\n//               <p>Publication date: {new Date(post.publication_date).toLocaleDateString('en-GB', {\n//               day: '2-digit',\n//               month: 'long',\n//               year: 'numeric',\n//               })}</p>\n//               <p>Created on: {new Date(post.created_on).toLocaleDateString('en-GB', {\n//               day: '2-digit',\n//               month: 'long',\n//               year: 'numeric',\n//               })}</p>\n//               <p>\n//                 {post.body && post.body.length > 100 \n//                   ? `${post.body.substring(0, 100)}...` \n//                   : post.body || 'No content available'}\n//               </p>\n//             </div>\n//           ))}\n//         </div>\n//       )}\n//     </div>\n//   );\n// };\n\n// export default WritingLandingPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}